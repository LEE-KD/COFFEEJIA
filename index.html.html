<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>coffeejia | ë””ì €íŠ¸ë¡œ ì•Œì•„ë³´ëŠ” ì»¤í”¼ ì›ë‘ í…ŒìŠ¤íŠ¸</title>
<style>
  :root{
    --bg:#fff; --text:#1a1a1a; --muted:#666; 
    --brand:#ffd457; /* ë©”ì¸ */
    --sub:#8b6a42;   /* ì„œë¸Œ */
    --card:#fffdf5; --border:#e8d9b5;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Apple SD Gothic Neo,Noto Sans KR,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);}
  .wrap{max-width:920px;margin:0 auto;padding:24px}
  header{display:flex;align-items:center;justify-content:center;gap:10px;padding:8px 0}
  .logo{font-weight:900;font-size:28px;letter-spacing:.2px;color:#000}
  .sub{font-size:12px;color:var(--muted)}
  .card{background:var(--card);border:2px solid var(--border);border-radius:16px;padding:20px}
  .cta{display:inline-flex;align-items:center;gap:8px;padding:12px 16px;border-radius:12px;border:2px solid var(--sub);background:var(--brand);color:#000;font-weight:800;cursor:pointer;box-shadow:0 1px 0 rgba(0,0,0,.08)}
  .cta.ghost{background:transparent;color:#000}
  .grid{display:grid;gap:12px}
  .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  .qtitle{font-size:22px;font-weight:900;margin:4px 0 10px}
  .muted{color:var(--muted)}
  .progress{height:10px;background:#fff;border:2px solid var(--border);border-radius:999px;overflow:hidden}
  .bar{height:100%;background:var(--brand);width:0%;transition:width .25s}
  .opt{display:flex;gap:10px;align-items:flex-start;border:2px solid var(--border);background:#fff;border-radius:14px;cursor:pointer;padding:14px;text-align:left}
  .opt .label{font-weight:900}
  .opt .desc{font-size:12px;color:var(--sub);margin-top:4px}
  .opt.selected{outline:3px solid var(--sub)}
  .row{display:flex;justify-content:space-between;gap:10px;margin-top:8px}
  .btn{padding:10px 14px;border-radius:10px;border:2px solid var(--sub);background:var(--brand);color:#000;font-weight:900;cursor:pointer}
  .btn[disabled]{opacity:.45;cursor:not-allowed}
  .btn.ghost{background:transparent;color:#000}
  .result-title{font-size:26px;font-weight:900;margin:2px 0}
  .beans{display:grid;grid-template-columns:1fr;gap:12px;margin-top:10px}
  .bean{border:2px solid var(--border);border-radius:14px;padding:14px;background:#fff}
  .bean .name{font-weight:900}
  .bean .tag{color:var(--sub);font-size:13px}
  .bean .link{margin-top:8px}
  .bean .link a{display:inline-block;padding:8px 10px;border:2px solid var(--sub);border-radius:10px;text-decoration:none;color:#000;background:var(--brand);font-weight:800}
  .bean ul{margin:8px 0 0 18px}
  footer{margin-top:20px;text-align:center;color:var(--muted);font-size:12px}
  @media (max-width:560px){
    .grid.cols-2{grid-template-columns:1fr}
  }
  /* intro center */
  .center{text-align:center}
  .center .cta{justify-content:center}

  /* taste note dots: consistent size & coloring */
  .taste-note{font-size:16px; line-height:1.5; letter-spacing:1px; margin-top:4px}
  .taste-note .filled{color: var(--sub);}   /* â— */
  .taste-note .empty{color: #c5c5c5;}       /* â—‹ */

</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">coffeejia</div>
    </header>

    <div id="app" class="card"></div>

    <footer>Â© coffeejia. ë””ì €íŠ¸ ì·¨í–¥ ê¸°ë°˜ ì¶”ì²œì€ ì¬ë¯¸ ìš”ì†Œì´ë©°, ë°”ë¦¬ìŠ¤íƒ€ì˜ ì•ˆë‚´ì™€ í•¨ê»˜ ì¦ê²¨ë³´ì„¸ìš” â˜•</footer>
  </div>

<script>
// ===== ë°ì´í„° ì˜ì—­ =====

// ì§ˆë¬¸ (ì´ë¯¸ì§€ ì œê±°, 'desc' ì¶”ê°€)
const QUESTIONS = [
  {
    id: 1,
    title: "ì˜¤ëŠ˜ ì¹´í˜ì—ì„œ ë””ì €íŠ¸ë¥¼ í•˜ë‚˜ ê³ ë¥¸ë‹¤ë©´?",
    options: [
      { id: "q1_a", label: "ê³¼ì¼ íƒ€ë¥´íŠ¸", desc: "ë°”ì‚­í•œ íƒ€ë¥´íŠ¸ì— ìƒí¼í•œ ê³¼ì¼ë¡œ ì‚°ëœ»í•œ í•œ ì…", score: { acidity: 3, sweet: 1 } },
      { id: "q1_b", label: "ë¸Œë¼ìš°ë‹ˆ", desc: "ì§„ë“í•œ ì´ˆì½œë¦¿ í…ìŠ¤ì²˜ì™€ ë¬µì§í•œ í’ë¯¸", score: { body: 3, bitter: 1 } },
      { id: "q1_c", label: "í¬ë£¨ì•„ìƒ", desc: "ë²„í„°ë¦¬í•œ ê²°ê³¼ ë‹´ë°±í•œ ê³ ì†Œí•¨", score: { balance: 3, body: 1 } },
      { id: "q1_d", label: "ì¹˜ì¦ˆì¼€ì´í¬", desc: "í¬ë¦¬ë¯¸í•œ ì§ˆê°ê³¼ ì€ì€í•œ ë‹¨ë§›", score: { sweet: 3, body: 1 } }
    ]
  },
  {
    id: 2,
    title: "ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ëŠ” ë‚  ìœ„ë¡œë°›ê³  ì‹¶ì€ ë””ì €íŠ¸ëŠ”?",
    options: [
      { id: "q2_a", label: "ê³¼ì¼ ìƒëŸ¬ë“œ", desc: "ê°€ë³ê³  ìƒí¼í•˜ê²Œ ê¸°ë¶„ ì „í™˜", score: { acidity: 3, balance: 1 } },
      { id: "q2_b", label: "ë¶€ë“œëŸ¬ìš´ í‘¸ë”©", desc: "ë§ë‘í•˜ê³  í¬ê·¼í•œ ìœ„ë¡œì˜ í•œ ìˆŸê°€ë½", score: { balance: 3, sweet: 1 } },
      { id: "q2_c", label: "ì§„í•œ ì´ˆì½œë¦¿ ì¼€ì´í¬", desc: "ì§„í•˜ê³  ë‹¤í¬í•œ ìœ„ë¡œ", score: { bitter: 3, body: 1 } },
      { id: "q2_d", label: "ê²¬ê³¼ë¥˜ ì¿ í‚¤", desc: "ë°”ì‚­í•¨ ì† ê³ ì†Œí•¨ì´ ì˜¤ë˜ ê°€ëŠ” ê°„ì‹", score: { body: 3, sweet: 1 } }
    ]
  },
  {
    id: 3,
    title: "ì˜¤í›„ì— ë‹¹ ë–¨ì–´ì§ˆ ë•Œ ì§‘ì–´ ë“¤ê³  ì‹¶ì€ ê±´?",
    options: [
      { id: "q3_a", label: "ìš”ê±°íŠ¸ íŒŒë¥´í˜", desc: "ê°€ë²¼ìš´ ìƒí¼í•¨ì— ë‹¬ì½¤í•¨ì„ ë”í•´ ë¦¬í”„ë ˆì‹œ", score: { acidity: 2, sweet: 2 } },
      { id: "q3_b", label: "ë²„í„°ì¿ í‚¤", desc: "ë‹´ë°±í•˜ê³  ê· í˜• ì¡íŒ ê¸°ë³¸ì˜ ë§›", score: { balance: 2, sweet: 2 } },
      { id: "q3_c", label: "ë‹¤í¬ ì´ˆì½œë¦¿", desc: "ê¹”ë”í•œ ìŒ‰ì‹¸ë¦„í•¨ìœ¼ë¡œ ì§‘ì¤‘ ON", score: { bitter: 2, body: 2 } },
      { id: "q3_d", label: "ì¹´ë¼ë©œ í‘¸ë”©", desc: "ë¶€ë“œëŸ¬ìš´ ë‹¨ë§›ìœ¼ë¡œ ë‹¹ ì¶©ì „", score: { sweet: 2, body: 2 } }
    ]
  },
  {
    id: 4,
    title: "ì¹œêµ¬ë“¤ê³¼ ì¹´í˜ì—ì„œ ìˆ˜ë‹¤ë–¨ ë•Œ ê³ ë¥¼ ë””ì €íŠ¸ëŠ”?",
    options: [
      { id: "q4_a", label: "ë ˆëª¬ ì¼€ì´í¬", desc: "ìƒí¼í•˜ê²Œ ë¶„ìœ„ê¸° ì—…", score: { acidity: 3, balance: 1 } },
      { id: "q4_b", label: "ë§ˆì¹´ë¡± ì„¸íŠ¸", desc: "ì•Œë¡ë‹¬ë¡ ë‹¬ì½¤í•œ í•œ ì…", score: { sweet: 3, balance: 1 } },
      { id: "q4_c", label: "ì—ìŠ¤í”„ë ˆì†Œ ë¸Œë¼ìš°ë‹ˆ", desc: "ì§„í•œ ì»¤í”¼í–¥ì˜ ë‹¤í¬ ì´ˆì½” ì½¤ë³´", score: { bitter: 3, body: 1 } },
      { id: "q4_d", label: "í”Œë ˆì¸ ìŠ¤ì½˜(ì¼/ë²„í„°)", desc: "ë²„í„°ì˜ ê³ ì†Œí•¨ì— ì¼ìœ¼ë¡œ í¬ì¸íŠ¸", score: { balance: 3, acidity: 1 } }
    ]
  },
  {
    id: 5,
    title: "ì§‘ì¤‘í•´ì„œ ì¼í•  ë•Œ ê³ë“¤ì´ê³  ì‹¶ì€ ê±´?",
    options: [
      { id: "q5_a", label: "ë¯¼íŠ¸ ì´ˆì½œë¦¿", desc: "ìƒì¾Œí•¨ê³¼ ë‹¤í¬í•¨ì˜ ìƒë°˜ëœ ë§¤ë ¥", score: { acidity: 2, bitter: 2 } },
      { id: "q5_b", label: "í”Œë ˆì¸ ì¿ í‚¤", desc: "ì§ˆë¦¬ì§€ ì•ŠëŠ” ë‹´ë°±í•œ ë² ì´ìŠ¤", score: { balance: 4 } },
      { id: "q5_c", label: "ì•„ëª¬ë“œ ë¸Œë¼ìš°ë‹ˆ", desc: "ê³ ì†Œí•œ ì‹ê°ê³¼ ë¬µì§í•œ í’ë¯¸", score: { body: 2, bitter: 2 } },
      { id: "q5_d", label: "ìºëŸ¬ë©œ íƒ€ë¥´íŠ¸", desc: "ë‹¬ì½¤í•¨ìœ¼ë¡œ ì§‘ì¤‘ë ¥ ë¶€ìŠ¤íŠ¸", score: { sweet: 4 } }
    ]
  },
  {
    id: 6,
    title: "í˜¼ìë§Œì˜ ì—¬ìœ  ì‹œê°„ì— ê³ ë¥´ê³  ì‹¶ì€ ë””ì €íŠ¸ëŠ”?",
    options: [
      { id: "q6_a", label: "ë² ë¦¬ íƒ€ë¥´íŠ¸", desc: "ê³¼ì¦™ ê°€ë“ ìƒí¼ë‹¬ì½¤", score: { acidity: 2, sweet: 2 } },
      { id: "q6_b", label: "í¬ë¦¼ í‘¸ë”©", desc: "ë¶€ë“œëŸ½ê³  í¬ë¦¬ë¯¸í•œ íœ´ì‹", score: { sweet: 2, balance: 2 } },
      { id: "q6_c", label: "ê²¬ê³¼ë¥˜ íŒŒì´", desc: "ë°”ì‚­í•œ ê²¬ê³¼ì™€ ë‹¬ì½¤í•¨ì˜ í•˜ëª¨ë‹ˆ", score: { body: 2, bitter: 2 } },
      { id: "q6_d", label: "ë°€í¬ ì ¤ë¦¬", desc: "ê¹”ë”í•˜ê³  ë‹´ë°±í•œ ë§ˆë¬´ë¦¬", score: { balance: 2, sweet: 2 } }
    ]
  }
];

// 20ê°œ ê²°ê³¼ íƒ€ì… (ë” ìƒë™ê° ìˆëŠ” ë¬¸êµ¬)
const RESULT_TYPES = {
  ACIDITY_BODY: { 
    name: "ë³µí•©ì  íƒí—˜íŒŒ", 
    about: "ì²« ëª¨ê¸ˆì€ ìƒí¼, ë ë§›ì€ ê¹Šê²Œ. í™”ì‚¬í•¨ê³¼ ë¬µì§í•¨ì„ í•œ ì” ì•ˆì—ì„œ ë°œê²¬í•´ë‚´ëŠ” ë¯¸ê° íƒí—˜ê°€ì˜ˆìš”. ìƒˆë¡œìš´ ì¡°í•©ì„ ì‹œë„í• ìˆ˜ë¡ ë” ë¹›ë‚©ë‹ˆë‹¤.",
    beans: ["ì¼€ëƒ AA","ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ëª¨"] 
  },
  ACIDITY_SWEET:{ 
    name:"ë‹¬ì½¤ìƒí¼íŒŒ", 
    about:"ê³¼ì¼ì˜ ìƒê¸°ì™€ ë¶€ë“œëŸ¬ìš´ ë‹¬ì½¤í•¨ì„ ë™ì‹œì— ì‚¬ë‘í•˜ëŠ” íƒ€ì…. ì‚°ëœ»í•˜ì§€ë§Œ í¬ê·¼í•œ ì—¬ìš´ì„ ë‚¨ê¸°ëŠ” í•œ ì”ì´ ë”± ë§ì•„ìš”.",
    beans:["í•˜ì™€ì´ì•ˆ ì½”ë‚˜","ì½”ìŠ¤íƒ€ë¦¬ì¹´ ë”°ë¼ì£¼"] 
  },
  ACIDITY_BITTER:{ 
    name:"ëŒ€ë¹„ë§¤ë ¥íŒŒ", 
    about:"ìƒí¼í•¨ê³¼ ë‹¤í¬ì˜ ê²½ê³„ë¥¼ ë„˜ë‚˜ë“¤ë©° ê¸´ì¥ê°ì„ ì¦ê¹ë‹ˆë‹¤. ë°˜ì „ ìˆëŠ” ë§›ì„ ì°¾ì„ ë•Œë§ˆë‹¤ ë¯¸ì†Œê°€ ì§€ì–´ì§€ëŠ” ìŠ¤íƒ€ì¼.",
    beans:["ì˜ˆë©˜ ëª¨ì¹´ ë§ˆíƒ€ë¦¬","ì—í‹°ì˜¤í”¼ì•„ ì˜ˆê°€ì²´í”„"] 
  },
  ACIDITY_BALANCE:{ 
    name:"ì„¸ë ¨ëœ ì‚°ë¯¸íŒŒ", 
    about:"í”Œë¡œëŸ´í•œ í–¥ê³¼ ë˜ë ·í•œ ì‚°ë¯¸ë¥¼ ì‚¬ë‘í•˜ì§€ë§Œ, ë„˜ì¹˜ì§€ ì•Šê²Œ ë”± ì˜ˆìœ ì„ ì—ì„œ ë©ˆì¶œ ì¤„ ì•Œì•„ìš”. ìš°ì•„í•œ í´ë¦° ì»µì˜ ì£¼ì¸ê³µ.",
    beans:["ì—í‹°ì˜¤í”¼ì•„ ì˜ˆê°€ì²´í”„","ë“œ ê¼¬ë¥´ë§"] 
  },
  BODY_ACIDITY:{ 
    name:"ì§„í•œ ìƒí¼íŒŒ", 
    about:"ë°”ë””ëŠ” í™•ì‹¤íˆ, ë§ˆê°ì€ ìƒì¾Œí•˜ê²Œ. ê°•ë ¬í•˜ì§€ë§Œ ë‹µë‹µí•˜ì§€ ì•Šì€ â€˜íƒ„íƒ„í•œ í•œ ì”â€™ì„ ì¦ê¹ë‹ˆë‹¤.",
    beans:["ì¼€ëƒ AA","ê³¼í…Œë§ë¼ ì•ˆí‹°êµ¬ì•„"] 
  },
  BODY_SWEET:{ 
    name:"ë¶€ë“œëŸ¬ìš´ ì§„í•¨íŒŒ", 
    about:"ë¬´ê²Œê°ì€ ì±™ê¸°ë˜ ê±°ì¹ ìŒì€ ëœì–´ë‚¸ ì·¨í–¥. ê³ ì†Œí•¨ ìœ„ì— ë‹¬ì½¤í•œ ì—¬ìš´ì´ í¬ê·¼í•˜ê²Œ ë‚´ë ¤ì•‰ëŠ” ìŠ¤íƒ€ì¼ì´ì—ìš”.",
    beans:["ë§ë¼ìœ„ AAA","ì¸ë””ì•„ ëª¬ìˆœ ë§ë¼ë°” AA"] 
  },
  BODY_BITTER:{ 
    name:"ì§„í•œ ë‹¤í¬ë¡œìŠ¤íŠ¸íŒŒ", 
    about:"ì§™ê³  ë†ë°€í•œ ì¡´ì¬ê°ì„ ì°¾ëŠ” ë‹¹ì‹ . ë‹¤í¬ ì´ˆì½œë¦¿ ê°™ì€ ìŒ‰ì‹¸ë¦„í•¨ê³¼ ë‘í„°ìš´ ë°”ë””ê°€ ì§„ì§œ ì»¤í”¼ì˜ ë§¤ë ¥ì´ë¼ ë¯¿ìŠµë‹ˆë‹¤.",
    beans:["ë“œ ì¹¼ë¦¬","ì¸ë„ë„¤ì‹œì•„ ìˆ˜ë§ˆíŠ¸ë¼ ë§Œë¸ë§"] 
  },
  BODY_BALANCE:{ 
    name:"ë“ ë“ í•œ ë°¸ëŸ°ìŠ¤íŒŒ", 
    about:"ì•ˆì •ì ì¸ ê· í˜• ìœ„ì— ì•½ê°„ì˜ ë¬´ê²Œê°ì„ í†¡â€” ë”í•´ ë§Œì¡±ë„ë¥¼ ëŒì–´ì˜¬ë¦½ë‹ˆë‹¤. ë“ ë“ í•˜ì§€ë§Œ ê¹”ë”í•˜ê²Œ ë–¨ì–´ì§€ëŠ” ë§ˆê°ì´ í¬ì¸íŠ¸.",
    beans:["ê³¼í…Œë§ë¼ ì•ˆí‹°êµ¬ì•„","ë“œ ìƒì ¤ë¦¬"] 
  },
  SWEET_ACIDITY:{ 
    name:"ìƒí¼ë‹¬ì½¤íŒŒ", 
    about:"í–‡ì‚´ ê°™ì€ ì‚°ëœ»í•¨ì— ìì—°ìŠ¤ëŸ¬ìš´ ë‹¨ë§›ì„ ì–¹ì€ ìŠ¤íƒ€ì¼. ê¸°ë¶„ ì¢‹ì€ ì—ë„ˆì§€ê°€ ì˜¤ë˜ ë‚¨ì•„ìš”.",
    beans:["í•˜ì™€ì´ì•ˆ ì½”ë‚˜","ì½”ìŠ¤íƒ€ë¦¬ì¹´ ë”°ë¼ì£¼"] 
  },
  SWEET_BODY:{ 
    name:"ë‹¬ì½¤í•œ ì—¬ìœ íŒŒ", 
    about:"í¬ê·¼í•œ ë‹¨ë§›ê³¼ ì ë‹¹í•œ ë¬´ê²Œê°ìœ¼ë¡œ íœ´ì‹ ëª¨ë“œë¥¼ ì¼­ë‹ˆë‹¤. ì¼ìƒì˜ ì‘ì€ ë³´ìƒì´ í•„ìš”í•œ ìˆœê°„ì— ë”±!",
    beans:["ë¸Œë¼ì§ˆ ì‚°í† ìŠ¤","ì˜¨ë‘ë¼ìŠ¤ SHG"] 
  },
  SWEET_BITTER:{ 
    name:"ë‹¬ìŒ‰ ì¡°í™”íŒŒ", 
    about:"ë‹¬ì½¤í•¨ ë’¤ì— ì‚´ì§ ì˜¬ë¼ì˜¤ëŠ” ì–´ë¥¸ìŠ¤ëŸ¬ìš´ ìŒ‰ì‹¸ë¦„. ê· í˜•ê° ìˆëŠ” ì…ì²´ê°ì´ ë§¤ë ¥ì ì´ì—ìš”.",
    beans:["ì¿ ë°” í¬ë¦¬ìŠ¤íƒˆ ë§ˆìš´í‹´","ë“œ ë¡œë Œ"] 
  },
  SWEET_BALANCE:{ 
    name:"ë¶€ë“œëŸ¬ìš´ ì¼ìƒíŒŒ", 
    about:"ë§¤ì¼ ë§ˆì…”ë„ ì§ˆë¦¬ì§€ ì•ŠëŠ” ì˜¨í™”í•¨. ë¶€ë“œëŸ¬ìš´ ë‹¨ë§›ê³¼ ê¹”ë”í•œ ë°¸ëŸ°ìŠ¤ê°€ ë°ì¼ë¦¬ ë£¨í‹´ì— ì°© ë¶™ìŠµë‹ˆë‹¤.",
    beans:["ì½œë¡¬ë¹„ì•„ ìˆ˜í”„ë¦¬ëª¨","ë“œ ë‘ì„¸ë¥´"] 
  },
  BITTER_ACIDITY:{ 
    name:"ìŒ‰ìŒ€ìƒí¼íŒŒ", 
    about:"ì¹´ì¹´ì˜¤ì˜ ê¹Šì´ì™€ ë ˆëª¬ ì œìŠ¤íŠ¸ì˜ ë²ˆëœ©ì„ì„ í•œ ì»·ì—. ëŒ€ë¹„ê°ì—ì„œ ì˜¤ëŠ” ì§œë¦¿í•¨ì„ ì‚¬ë‘í•©ë‹ˆë‹¤.",
    beans:["ì˜ˆë©˜ ëª¨ì¹´ ë§ˆíƒ€ë¦¬","ì¼€ëƒ AA"] 
  },
  BITTER_BODY:{ 
    name:"ê¹Šì€ ë§› ì¶”êµ¬íŒŒ", 
    about:"ìŒ‰ì‹¸ë¦„í•¨ê³¼ ë‘ê»˜ê°ì´ ë§Œë“œëŠ” â€˜ì§‘ì¤‘ì˜ ìˆœê°„â€™ì„ ì¦ê²¨ìš”. í•œ ëª¨ê¸ˆë§ˆë‹¤ ëª°ì…ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.",
    beans:["ì¸ë„ë„¤ì‹œì•„ ìˆ˜ë§ˆíŠ¸ë¼ ë§Œë¸ë§","ë“œ ì¹¼ë¦¬"] 
  },
  BITTER_SWEET:{ 
    name:"ì–´ë¥¸ ë‹¬ì½¤íŒŒ", 
    about:"ë‹¤í¬í•¨ ì†ì—ì„œ ì€ì€í•˜ê²Œ í”¼ì–´ë‚˜ëŠ” ë‹¨ë§›. ì„±ìˆ™í•˜ê³  í’ˆìœ„ ìˆëŠ” ì—¬ìš´ì„ ì°¾ëŠ” ì·¨í–¥ì´ì—ìš”.",
    beans:["ê³¼í…Œë§ë¼ ì•ˆí‹°êµ¬ì•„","ì¿ ë°” í¬ë¦¬ìŠ¤íƒˆ ë§ˆìš´í‹´"] 
  },
  BITTER_BALANCE:{ 
    name:"ì„¸ë ¨ëœ ìŒ‰ìŒ€íŒŒ", 
    about:"ìŒ‰ìŒ€í•˜ì§€ë§Œ ê³¼í•˜ì§€ ì•Šê²Œ, ë‚ ì¹´ë¡­ì§€ ì•Šìœ¼ë©´ì„œë„ ë˜ë ·í•˜ê²Œ. ê¹”ë”í•œ ë§ˆê°ì´ íŠ¹ì§•ì…ë‹ˆë‹¤.",
    beans:["ì¿ ë°” í¬ë¦¬ìŠ¤íƒˆ ë§ˆìš´í‹´","ì˜ˆë©˜ ëª¨ì¹´ ë§ˆíƒ€ë¦¬"] 
  },
  BALANCE_ACIDITY:{ 
    name:"ê¹”ë”í•œ ì˜¬ë¼ìš´ë”", 
    about:"ì „ì²´ ë°¸ëŸ°ìŠ¤ëŠ” ë‹¨ë‹¨íˆ, ì‚°ëœ»í•¨ì€ ì‚´ì§. ëˆ„êµ¬ì—ê²Œë‚˜ ì¶”ì²œí•˜ê¸° ì¢‹ì€ â€˜ì•ˆì „í•œ ë§›ì˜ ë¯¸í•™â€™.",
    beans:["ë“œ ê¼¬ë¥´ë§","ì½”ìŠ¤íƒ€ë¦¬ì¹´ ë”°ë¼ì£¼"] 
  },
  BALANCE_BODY:{ 
    name:"ë“ ë“ í•œ ë°¸ëŸ°ìŠ¤íŒŒ", 
    about:"ì•ˆì •ì ì¸ ê· í˜• ìœ„ì— ì•½ê°„ì˜ ë¬´ê²Œê°ì„ í†¡â€” ë”í•´ ë§Œì¡±ë„ë¥¼ ëŒì–´ì˜¬ë¦½ë‹ˆë‹¤. ë“ ë“ í•˜ì§€ë§Œ ê¹”ë”í•˜ê²Œ ë–¨ì–´ì§€ëŠ” ë§ˆê°ì´ í¬ì¸íŠ¸.",
    beans:["ë“œ ìƒì ¤ë¦¬","ì˜¨ë‘ë¼ìŠ¤ SHG"] 
  },
  BALANCE_SWEET:{ 
    name:"ë§ŒëŠ¥ ìˆœí•œíŒŒ", 
    about:"ëˆ„êµ¬ë‚˜ í¸ì•ˆí•˜ê²Œ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ìˆœí•œ ë§›. ë¶€ë“œëŸ½ê³  ë‹¤ì •í•œ ë°ì¼ë¦¬ ì»¤í”¼ë¥¼ ì°¾ëŠ”ë‹¤ë©´ ì—¬ê¸°ë¡œ.",
    beans:["ì½œë¡¬ë¹„ì•„ ìˆ˜í”„ë¦¬ëª¨","ë“œ ë‘ì„¸ë¥´"] 
  },
  BALANCE_BITTER:{ 
    name:"ì„±ìˆ™í•œ ì–´ë¥¸íŒŒ", 
    about:"ê· í˜•ê°ì€ ê¸°ë³¸, ì—¬ê¸°ì— ì‚´ì§ì˜ ìŒ‰ì‹¸ë¦„í•¨ìœ¼ë¡œ ê¹Šì´ë¥¼ ë”í•©ë‹ˆë‹¤. ë‹´ë°±í•˜ì§€ë§Œ ì¡´ì¬ê° ìˆëŠ” ìŠ¤íƒ€ì¼.",
    beans:["ë¸Œë¼ì§ˆ ì‚°í† ìŠ¤","ë§ë¼ìœ„ AAA"] 
  }
};

// ì›ë‘ DB (ìš”ì•½ + URL)
const BEAN_DB = {
  "ì½œë¡¬ë¹„ì•„ ìˆ˜í”„ë¦¬ëª¨": { url:"https://coffeejia.com/product/%EC%BD%9C%EB%A1%AC%EB%B9%84%EC%95%84-%EC%88%98%ED%94%84%EB%A6%AC%EB%AA%A8/118/category/63/display/1/", tagline:"ë‹¨ë§›Â·ì‹ ë§›Â·ì“´ë§›ì˜ ì¡°í™”, ì‚°ëœ»í•œ ëª©ë„˜ê¹€", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ì‹ ë§› â—â—â—â—‹â—‹ / ë‹¨ë§› â—â—â—â—‹â—‹ / ê· í˜• â—â—â—â—â—‹", roast:"Medium (City)", pairings:["í¬ë£¨ì•„ìƒ â€“ ë²„í„°ì˜ ê³ ì†Œí•¨ì„ ì‚°ë¯¸ê°€ ì •ë¦¬","ë°€í¬ ì´ˆì½œë¦¿ ë””ì €íŠ¸ â€“ ë°¸ëŸ°ìŠ¤ë¥¼ ì‚´ë¦¼"] },
  "ì¼€ëƒ AA": { url:"https://coffeejia.com/product/%EC%BC%80%EB%83%90aa/119/category/63/display/1/", tagline:"ê°•ë ¬í•œ í–¥ê³¼ í’ë¶€í•œ ë§›, ì§„í•œ ì‚°ë¯¸", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ì‹ ë§› â—â—â—â—â—‹", roast:"Medium (Full City)", pairings:["ì‹ ì„  ê³¼ì¼Â·íƒ€ë¥´íŠ¸ â€“ ìƒí¼ ì‹œë„ˆì§€","í‹°ë¼ë¯¸ìˆ˜Â·ì¹˜ì¦ˆì¼€ì´í¬ â€“ í¬ë¦¬ë¯¸ ë‹¨ë§›ì´ ì‚°ë¯¸ë¥¼ ë°›ì³ì¤Œ"] },
  "ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ëª¨": { url:"https://coffeejia.com/product/%EC%97%90%ED%8B%B0%EC%98%A4%ED%94%BC%EC%95%84-%EC%8B%9C%EB%8B%A4%EB%AA%A8/121/category/63/display/1/", tagline:"ê¹Šê³  ë¬µì§í•œ í–¥, ê°•ë ¬í•œ ì‚°ë¯¸", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ì‹ ë§› â—â—â—â—â—‹", roast:"Medium (City)", pairings:["ë²„í„° ì¿ í‚¤Â·ë¡¤ì¼€ì´í¬ â€“ ê½ƒí–¥ê³¼ ì‚°ë¯¸ê°€ ì‚°ëœ»í•˜ê²Œ","ì¹˜ì¦ˆ ì¹´ë‚˜í˜ â€“ ì‚°ë¯¸ê°€ ì¡°í™”"] },
  "ì—í‹°ì˜¤í”¼ì•„ ì˜ˆê°€ì²´í”„": { url:"https://coffeejia.com/product/%EC%97%90%ED%8B%B0%EC%98%A4%ED%94%BC%EC%95%84-%EC%98%88%EA%B0%80%EC%B2%B4%ED%94%84/125/category/63/display/1/", tagline:"ë¶€ë“œëŸ¬ìš´ ë°”ë””ì™€ ê½ƒí–¥, ì„¸ë ¨ëœ ì‚°ë¯¸", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—‹â—‹â—‹ / ì‹ ë§› â—â—â—â—â—‹", roast:"Medium (City)", pairings:["ë°”ë‹ë¼ ì•„ì´ìŠ¤í¬ë¦¼Â·ì—í¬ê°€í†  â€“ í–¥ë¯¸ ê·¹ëŒ€í™”","ì‚¬ê³¼ íƒ€ë¥´íŠ¸ â€“ ìƒí¼í•œ ë§ˆë¬´ë¦¬"] },
  "ê³¼í…Œë§ë¼ ì•ˆí‹°êµ¬ì•„": { url:"https://coffeejia.com/product/%EA%B3%BC%ED%85%8C%EB%A7%90%EB%9D%BC-%EC%95%88%ED%8B%B0%EA%B5%AC%EC%95%84/117/category/63/display/1/", tagline:"ìŠ¤ëª¨í‚¤Â·ì´ˆì½œë¦¿ í–¥, ì¤‘í›„í•œ ë°”ë””", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—â—‹ / ì“´ë§› â—â—â—â—‹â—‹", roast:"Medium-Dark (Full City)", pairings:["ë¸Œë¼ìš°ë‹ˆ â€“ ì´ˆì½œë¦¿Â·ê²¬ê³¼ ì—°ê²°","ì™€í”Œ+ì¹´ë¼ë©œ â€“ ë‹¬ì½¤ìŒ‰ì‹¸ë¦„ ì¡°í™”"] },
  "ë¸Œë¼ì§ˆ ì‚°í† ìŠ¤": { url:"https://coffeejia.com/product/%EB%B8%8C%EB%9D%BC%EC%A7%88-%EC%82%B0%ED%86%A0%EC%8A%A4/120/category/63/display/1/", tagline:"ë¶€ë“œëŸ¬ìš´ ë§›ê³¼ ì‚°ë¯¸ì˜ ê· í˜•", notes:"í–¥ â—â—â—â—‹â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ë‹¨ë§› â—â—â—â—‹â—‹", roast:"Medium (City)", pairings:["ìŠ¤ì½˜ â€“ ë‹´ë°±í•¨ì´ ë‹¨ë§›ì„ ë¶€ê°","ë²„í„°ì¿ í‚¤ â€“ ê³ ì†ŒÂ·ë°”ì‚­ ì¡°í™”"] },
  "í•˜ì™€ì´ì•ˆ ì½”ë‚˜": { url:"https://coffeejia.com/product/%ED%95%98%EC%99%80%EC%9D%B4%EC%95%88-%EC%BD%94%EB%82%98/127/category/63/display/1/", tagline:"ê³¼ì¼ ê°™ì€ ì‚°ë¯¸ì™€ ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë‹¨ë§›", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ë‹¨ë§› â—â—â—â—â—‹", roast:"Medium (City)", pairings:["ì´ˆì½œë¦¿ ì•„ì´ìŠ¤í¬ë¦¼Â·ë¸Œë¼ìš°ë‹ˆ â€“ ë¬´ê²Œ ì •ë¦¬","ë¡¤ì¼€ì´í¬ â€“ ë¶€ë“œëŸ¬ìš´ ì‹ê°ê³¼ ì¡°í™”"] },
  "ë§ë¼ìœ„ AAA": { url:"https://coffeejia.com/product/%EB%A7%90%EB%9D%BC%EC%9C%84aaa/126/category/63/display/1/", tagline:"ë¶€ë“œëŸ¬ìš´ ë°”ë””ì™€ ê³ ì†Œí•œ í–¥", notes:"í–¥ â—â—â—â—‹â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ë‹¨ë§› â—â—â—â—‹â—‹", roast:"Medium (City)", pairings:["ë¨¸í•€ â€“ ë‹´ë°±+ë°”ë”” ì¡°í™”","ì´ˆì½” ë¡¤ì¼€ì´í¬ â€“ ë‹¬ì½¤ìŒ‰ì‹¸ë¦„+ê³ ì†Œí•¨"] },
  "ì¸ë„ë„¤ì‹œì•„ ìˆ˜ë§ˆíŠ¸ë¼ ë§Œë¸ë§": { url:"https://coffeejia.com/product/%EC%9D%B8%EB%8F%84%EB%84%A4%EC%8B%9C%EC%95%84-%EC%88%98%EB%A7%88%ED%8A%B8%EB%9D%BC-%EB%A7%8C%EB%8D%B8%EB%A7%81/124/category/63/display/1/", tagline:"ë‚®ì€ ì‚°ë¯¸, ê°•í•œ ë°”ë””, í—ˆë¸ŒÂ·ì´ˆì½œë¦¿", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—â—‹ / ì“´ë§› â—â—â—â—‹â—‹", roast:"Medium-Dark (Full City)", pairings:["ê²¬ê³¼Â·ê³¼ì¼ íŒŒì´ â€“ ìŠ¤íŒŒì´ì‹œ ë…¸íŠ¸ì™€ ì¡°í™”","ì‹œë‚˜ëª¬ ë¡¤ â€“ í—ˆë¸ŒÂ·ìŠ¤íŒŒì´ìŠ¤ ì‹œë„ˆì§€"] },
  "ì¿ ë°” í¬ë¦¬ìŠ¤íƒˆ ë§ˆìš´í‹´": { url:"https://coffeejia.com/product/%EC%BF%A0%EB%B0%94-%ED%81%AC%EB%A6%AC%EC%8A%A4%ED%83%88-%EB%A7%88%EC%9A%B4%ED%8B%B4/142/category/63/display/1/", tagline:"ê³ ì†Œí•¨ê³¼ ì‚°ë¯¸ì˜ ì„¸ë ¨ëœ ì¡°í™”", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ì‹ ë§› â—â—â—â—‹â—‹ / ë‹¨ë§› â—â—â—â—‹â—‹", roast:"Medium (City)", pairings:["ì‹œë‚˜ëª¬ ë¡¤ â€“ í–¥ì´ ê³ ì†Œí•¨Â·ì‚°ë¯¸ë¥¼ ì—°ê²°","ê³¼ì¼ íƒ€ë¥´íŠ¸Â·í¬ë¦¼ ì¼€ì´í¬ â€“ ìƒí¼+ë¶€ë“œëŸ¬ì›€"] },
  "ì¸ë””ì•„ ëª¬ìˆœ ë§ë¼ë°” AA": { url:"https://coffeejia.com/product/%EC%9D%B8%EB%94%94%EC%95%84-%EB%AA%AC%EC%88%9C-%EB%A7%90%EB%9D%BC%EB%B0%94-aa/122/category/63/display/1/", tagline:"ëª¬ìˆœ í’ë¯¸ì˜ êµ¬ìˆ˜í•œ í–¥, ë‚®ì€ ì‚°ë¯¸", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—â—‹ / ë‹¨ë§› â—â—â—â—‹â—‹", roast:"Medium (City)", pairings:["ê²¬ê³¼ë¥˜ â€“ êµ¬ìˆ˜í•¨ ì¦í­","ë‹´ë°±í•œ ë¹µë¥˜ â€“ ì—¬ìš´ ìœ ì§€"] },
  "ì˜¨ë‘ë¼ìŠ¤ SHG": { url:"https://coffeejia.com/product/%EC%98%A8%EB%91%90%EB%9D%BC%EC%8A%A4-shg/123/category/63/display/1/", tagline:"ì–´ëŠ í•œìª½ìœ¼ë¡œ ì¹˜ìš°ì¹˜ì§€ ì•Šì€ ë¶€ë“œëŸ¬ìš´ ê· í˜•", notes:"í–¥ â—â—â—â—‹â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ì‹ ë§› â—â—â—â—‹â—‹ / ë‹¨ë§› â—â—â—â—‹â—‹", roast:"Medium (City)", pairings:["ë§ˆì¼ë“œ ì¼€ì´í¬ â€“ ë¬´ë‚œ","ë¸”ë£¨ë² ë¦¬ ë¬´ìŠ¤/í¼í”„ ì´ˆì½œë¦¿ â€“ ì€ì€í•œ ë‹¨ë§›"] },
  "ì˜ˆë©˜ ëª¨ì¹´ ë§ˆíƒ€ë¦¬": { url:"https://coffeejia.com/product/%EC%98%88%EB%A9%98-%EB%AA%A8%EC%B9%B4-%EB%A7%88%ED%83%80%EB%A6%AC/143/category/63/display/1/", tagline:"ìƒˆì½¤ ê³¼ì¼í–¥ + ë¬µì§í•œ ë°”ë””", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ì‹ ë§› â—â—â—â—‹â—‹", roast:"Medium-Dark (Full City)", pairings:["ê³¼ì¼ í¬ë¦¼ì¼€ì´í¬ â€“ ì¡°í™”","ë²„í„°ì¿ í‚¤ â€“ ë‹´ë°±í•˜ê²Œ ì¤‘ì‹¬"] },
  "ì½”ìŠ¤íƒ€ë¦¬ì¹´ ë”°ë¼ì£¼": { url:"https://coffeejia.com/product/%EC%BD%94%EC%8A%A4%ED%83%80%EB%A6%AC%EC%B9%B4-%EB%94%B0%EB%9D%BC%EC%A3%BC/128/category/63/display/1/", tagline:"ë°ì€ ê°ê·¤í–¥ ì‚°ë¯¸, ê¹¨ë—í•œ ë°¸ëŸ°ìŠ¤", notes:"í–¥ â—â—â—â—‹â—‹ / ë°”ë”” â—â—â—‹â—‹â—‹ / ì‹ ë§› â—â—â—â—â—‹", roast:"Medium (Full City)", pairings:["í˜ì´ìŠ¤íŠ¸ë¦¬+ì´ˆì½” ë¬´ìŠ¤ â€“ ì‚°ë¯¸ê°€ ë¶€ë“œëŸ¬ì›Œì§","ë§ˆë¸” ì¼€ì´í¬/ì¿ í‚¤ â€“ ê³ ì†Œí•¨ ì¶”ê°€"] },
  "ë“œ ì¹¼ë¦¬": { url:"https://coffeejia.com/product/%EB%93%9C%EC%B9%BC%EB%A6%AC-%EB%B8%94%EB%A0%8C%EB%94%A9%EC%BB%A4%ED%94%BC/112/category/62/display/1/", tagline:"ë¦¬ì–¼ ì´íƒˆë¦¬ì•ˆ ê°ì„±ì˜ ì§™ì€ í’ë¯¸", notes:"ë°”ë”” â—â—â—â—â—‹ / í–¥ â—â—â—â—â—‹ / ì“´ë§› â—â—â—â—‹â—‹", roast:"Medium-Dark (Full City)", pairings:["ë²„í„°ì¿ í‚¤Â·ì‡¼ì½œë¼ ë¡¤ â€“ ë¶€ë“œëŸ½ê²Œ ë§ˆê°","ì´ˆì½œë¦¿ ë¬´ìŠ¤ì¼€ì´í¬ â€“ ë‹¬ìŒ‰ ì •ì„"] },
  "ë“œ ê¼¬ë¥´ë§": { url:"https://coffeejia.com/product/%EB%93%9C%EA%BC%AC%EB%A5%B4%EB%A7%9D-%EB%B8%94%EB%A0%8C%EB%94%A9%EC%BB%A4%ED%94%BC/114/category/62/display/1/", tagline:"ì½”ë‚˜ ë¸”ë Œë”©ì˜ ì‚°ëœ»í•˜ê³  ì„¸ë ¨ëœ ê°ì¹ ë§›", notes:"í–¥ â—â—â—â—â—‹ / ì‹ ë§› â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—‹â—‹", roast:"Medium (City)", pairings:["ì¹´ìŠ¤í…Œë¼Â·ì¿ í‚¤ â€“ ì‚°ëœ»í•œ ì‚°ë¯¸ì™€ ì¡°í™”","ì€ì€í•œ ë‹¨ë§› ì¼€ì´í¬ â€“ ë°¸ëŸ°ìŠ¤ ê°•í™”"] },
  "ë“œ ìƒì ¤ë¦¬": { url:"https://coffeejia.com/product/%EB%93%9C%EC%83%B9%EC%A0%A4%EB%A6%AC-%EB%B8%94%EB%A0%8C%EB%94%A9%EC%BB%A4%ED%94%BC/113/category/62/display/1/", tagline:"í•œêµ­ì¸ì˜ ì…ë§›: êµ¬ìˆ˜Â·ë¶€ë“œëŸ¬ì›€", notes:"ë°”ë”” â—â—â—â—â—‹ / ê· í˜• â—â—â—â—â—‹", roast:"Medium-Dark (Full City)", pairings:["ë¶€ë“œëŸ¬ìš´ ì¼€ì´í¬ â€“ êµ¬ìˆ˜ í’ë¯¸ì™€ ì¡°í™”","ê²¬ê³¼ë¥˜ íŒŒì´Â·ì‹œë‚˜ëª¬ ë¡¤ â€“ ê³ ì†ŒÂ·í–¥ë¯¸ ìƒìŠ¹"] },
  "ë“œ ë‘ì„¸ë¥´": { url:"https://coffeejia.com/product/%EB%93%9C%EB%9E%91%EC%84%B8%EB%A5%B4-%EB%B8%94%EB%A0%8C%EB%94%A9%EC%BB%A4%ED%94%BC/115/category/62/display/1/", tagline:"ëª©ë„˜ê¹€ ì¢‹ì€ ë§ˆì¼ë“œ, ê¹”ë”í•œ í’ë¯¸", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ê· í˜• â—â—â—â—‹â—‹", roast:"Medium (Full City)", pairings:["ë²„í„°ì¿ í‚¤Â·ë§ˆë“¤ë Œ â€“ ë² ìŠ¤íŠ¸ ì¡°í•©","ê°€ë²¼ìš´ ê³¼ìë¥˜ â€“ ë°ì¼ë¦¬"] },
  "ë“œ ë¡œë Œ": { url:"https://coffeejia.com/product/%EB%93%9C%EB%A1%9C%EB%A0%8C-%EB%B8%94%EB%A0%8C%EB%94%A9%EC%BB%A4%ED%94%BC/116/category/62/display/1/", tagline:"ì‚°ëœ»í•œ ì‚°ë¯¸ì™€ ì„¸ë ¨ëœ í’ë¯¸", notes:"í–¥ â—â—â—â—â—‹ / ë°”ë”” â—â—â—â—‹â—‹ / ì‹ ë§› â—â—â—â—‹â—‹", roast:"Medium (City)", pairings:["ìŠˆÂ·ë§ˆì¹´ë¡± â€“ ê°€ë²¼ìš´ ë‹¬ì½¤í•¨","ìˆ˜ì œ ì´ˆì½œë¦¿ â€“ ë‹¬ìŒ‰ì´ í–¥ë¯¸ ë¶€ê°"] }
};

const TRAITS = ["acidity","body","sweet","bitter","balance"];

// ===== ì•± ë¡œì§ =====
const $app = document.getElementById("app");
let step = 0; // 0:intro, 1..6:ì§ˆë¬¸, 7:ê²°ê³¼
const answers = {}; // qid -> oid
let scores = { acidity:0, body:0, sweet:0, bitter:0, balance:0 };

function render(){
  $app.innerHTML = "";
  const container = document.createElement("div");

  if(step===0){
    container.className = "center";
    container.innerHTML = `
      <div class="grid" style="gap:14px">
        <div class="muted">coffeejia í…ŒìŠ¤íŠ¸</div>
        <h2 class="qtitle">ğŸ° ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ë””ì €íŠ¸ë¡œ ì•Œì•„ë³´ëŠ” ì»¤í”¼ ì›ë‘</h2>
        <p class="muted">â€œë‹¹ì‹ ì´ ê³ ë¥¸ ë””ì €íŠ¸ê°€ ë‹¹ì‹ ì˜ ì»¤í”¼ ì·¨í–¥ì„ ì•Œë ¤ì¤ë‹ˆë‹¤!â€<br>6ê°œì˜ ì§ˆë¬¸ì— ë‹µí•˜ë©´, ì„±í–¥ì— ë”± ë§ëŠ” ì›ë‘ì™€ ì–´ìš¸ë¦¬ëŠ” ë””ì €íŠ¸ê¹Œì§€ ì•Œë ¤ë“œë¦´ê²Œìš”.</p>
        <div><button class="cta" onclick="start()">ì‹œì‘í•˜ê¸°</button></div>
      </div>
    `;
  } else if(step>=1 && step<=QUESTIONS.length){
    const q = QUESTIONS[step-1];
    const progress = Math.round(((step-1)/QUESTIONS.length)*100);
    const selected = answers[q.id];

    const section = document.createElement("section");
    section.innerHTML = `
      <div class="grid" style="gap:10px">
        <div class="progress"><div class="bar" style="width:${progress}%"></div></div>
        <div class="muted">Q${step} / ${QUESTIONS.length}</div>
        <div class="qtitle">${q.title}</div>
        <div class="grid cols-2" id="opts"></div>
        <div class="row">
          <button class="btn ghost" onclick="prev()">ì´ì „</button>
          <button class="btn" ${selected? "":"disabled"} onclick="next()">${step===QUESTIONS.length ? "ê²°ê³¼ ë³´ê¸°" : "ë‹¤ìŒ"}</button>
        </div>
      </div>
    `;
    $app.appendChild(section);

    const $opts = section.querySelector("#opts");
    q.options.forEach(opt=>{
      const btn = document.createElement("button");
      btn.className = "opt"+(selected===opt.id?" selected":"");
      btn.onclick = ()=>{ answers[q.id]=opt.id; render(); };
      btn.innerHTML = `
        <div>
          <div class="label">${opt.label}</div>
          <div class="desc">${opt.desc}</div>
        </div>
      `;
      $opts.appendChild(btn);
    });
  } else {
    // ê²°ê³¼
    calcScores();
    const {type, name, about, beans} = resolveResultType(scores);
    const htmlBeans = beans.map(b=>beanCard(b)).join("");
    container.innerHTML = `
      <div class="grid" style="gap:12px">
        <div class="muted">ê²°ê³¼</div>
        <div class="result-title">${name}</div>
        <p>${about}</p>
        <h4 style="margin:8px 0 0;font-weight:800;color:var(--sub)">ì–´ìš¸ë¦¬ëŠ” ì›ë‘</h4>
        <div class="beans">${htmlBeans}</div>
        <div class="row" style="margin-top:12px">
          <button class="btn ghost" onclick="resetAll()">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸</button>
        </div>
      </div>
    `;
  }

  $app.appendChild(container);
}

function start(){ step=1; render(); }
function prev(){ step=Math.max(0,step-1); render(); }
function next(){ step=Math.min(QUESTIONS.length+1,step+1); render(); }
function resetAll(){
  step=1;
  for(const k in answers) delete answers[k];
  scores = { acidity:0, body:0, sweet:0, bitter:0, balance:0 };
  render();
}

function calcScores(){
  scores = { acidity:0, body:0, sweet:0, bitter:0, balance:0 };
  Object.entries(answers).forEach(([qid, oid])=>{
    const q = QUESTIONS.find(qq=>qq.id===Number(qid));
    const opt = q && q.options.find(o=>o.id===oid);
    if(opt && opt.score){
      for(const k in opt.score){ scores[k] += opt.score[k]; }
    }
  });
}

function resolveResultType(scores){
  // ìƒìœ„ 2ê°œ ì¶• ì¶”ì¶œ
  const entries = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
  const [a,b] = entries;
  const key = `${a[0].toUpperCase()}_${b[0].toUpperCase()}`;
  const alt = `${b[0].toUpperCase()}_${a[0].toUpperCase()}`;
  const t = RESULT_TYPES[key] || RESULT_TYPES[alt] || RESULT_TYPES.BALANCE_SWEET;
  return { type:key, name:t.name, about:t.about, beans:t.beans };
}

function beanCard(name){
  const b = BEAN_DB[name] || null;
  if(!b) return "";
  const linkText = `${name} ì›ë‘ ë³´ëŸ¬ê°€ê¸°`;
  return `
    <div class="bean">
      <div class="name">${name}</div>
      <div class="tag">${b.tagline}</div>
      <div class="taste-note">í…Œì´ìŠ¤íŠ¸ ë…¸íŠ¸: ${b.notes.replace(/â—/g, '<span class=\"filled\">â—</span>').replace(/â—‹/g, '<span class=\"empty\">â—‹</span>')}</div>
      <div class="muted">ì¶”ì²œ ë¡œìŠ¤íŒ…: ${b.roast}</div>
      <ul>${b.pairings.map(p=>`<li>${p}</li>`).join("")}</ul>
      <div class="link"><a href="${b.url}" target="_blank" rel="noopener noreferrer">${linkText}</a></div>
    </div>
  `;
}

// ì´ˆê¸° ë Œë”
render();
</script>
</body>
</html>
